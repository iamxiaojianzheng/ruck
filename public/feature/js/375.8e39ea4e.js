"use strict";(self["webpackChunkfeature"]=self["webpackChunkfeature"]||[]).push([[375],{6521:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3-15.4 12.3-16.6 35.4-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8z"}}]},name:"pushpin",theme:"filled"};t["default"]=a},20351:function(e,t,a){t.A=void 0;var n=a(4126),l=u(a(6521)),r=u(a(85656));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(e,t){var a=i({},e,t.attrs);return(0,n.createVNode)(r["default"],i({},a,{icon:l["default"]}),null)};o.displayName="PushpinFilled",o.inheritAttrs=!1;var s=o;t.A=s},22375:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var n=a(26668),l=a(20351),r=a(38345),u=a(85307),i=(a(90327),a(63773)),c=(a(28756),a(99161),a(14799),a(55634),a(84985),a(45006)),o=a(87698),s=a(23294),d=a(13956),v=a(57036),f=a(84716);const p={class:"installed"},m={class:"view-title"},b={class:"view-container"},k={key:0},g={key:1,class:"container"},y={class:"installed-list"},h=["onClick"],w=["src"],_={class:"info"},O={class:"title"},L={class:"desc"},C={class:"plugin-detail"},P={class:"plugin-top"},j={class:"left"},E={class:"title"},F={class:"meta"},x={class:"desc"},N={class:"right"},X={class:"feature-container"};var A={__name:"index",setup(e){const t=(0,d.Pj)(),a=(0,v.lq)(),A=(0,v.rd)(),R=(0,c.EW)(()=>t.state.localPlugins.filter(e=>"rubick-system-feature"!==e.name)),S=()=>t.dispatch("updateLocalPlugin"),W=e=>t.dispatch("startUnDownload",e),M=e=>t.dispatch("errorUnDownload",e),I=(0,s.KR)([a.query.plugin||R?.value[0]?.name]);(0,c.wB)(R,()=>{I.value=[R?.value[0]?.name]});const K=(0,c.EW)(()=>R.value.find(e=>e.name===I.value[0])||{}),D=(0,s.KR)(window.rubick.db.get("super-panel-user-plugins")||{data:[],_id:"super-panel-user-plugins"}),$=(e,t,a)=>{"open"===e?J({code:t.code,cmd:a}):"add"===e?z({cmd:a,code:t.code}):T({cmd:a,name:t.name})},z=({cmd:e,code:t})=>{const a={...(0,s.ux)(K.value),cmd:e,ext:{code:t,type:"text",payload:null}};D.value.data.push(a);const{rev:n}=window.rubick.db.put(JSON.parse(JSON.stringify(D.value)));D.value._rev=n},T=({cmd:e,name:t})=>{D.value.data=(0,s.ux)(D.value).data.filter(a=>t?a.name!==t:a.cmd!==e);const{rev:a}=window.rubick.db.put((0,s.ux)(D.value));D.value._rev=a},B=e=>{let t=!1;return D.value.data.some(a=>a.cmd===e&&(t=!0,!0)),t},J=({cmd:e,code:t})=>{window.rubick.openPlugin(JSON.parse(JSON.stringify({...K.value,cmd:e,ext:{code:t,type:"text",payload:null}})))},U=async e=>{W(e.name);const t=setTimeout(()=>{M(e.name),i["default"].error("卸载超时，请重试！")},2e4);try{await window.market.deletePlugin(e),T({name:e.name}),await S(),clearTimeout(t);const a=R.value.some(t=>t.name===e.name);a?(M(e.name),i["default"].error("插件卸载失败，请重试！")):i["default"].success(`插件「${e.pluginName}」卸载成功！`)}catch(a){clearTimeout(t),M(e.name),i["default"].error(`插件卸载失败：${a.message||"未知错误"}`)}},V=()=>{A.push("/finder"),t.commit("commonUpdate",{active:["finder"]})};return(e,t)=>{const a=(0,c.g2)("Vue3Lottie"),i=(0,c.g2)("a-button"),d=(0,c.g2)("a-result"),v=(0,c.g2)("a-menu-item"),A=(0,c.g2)("a-menu"),S=(0,c.g2)("a-dropdown");return(0,c.uX)(),(0,c.CE)("div",p,[(0,c.Lk)("div",m,(0,o.v_)(e.$t("feature.installed.title")),1),(0,c.Lk)("div",b,[R.value.length?((0,c.uX)(),(0,c.CE)("div",g,[(0,c.Lk)("div",y,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(R.value,(e,t)=>((0,c.uX)(),(0,c.CE)("div",{key:t,class:(0,o.C4)(I.value[0]===e.name?"item active":"item"),onClick:t=>I.value=[e.name]},[(0,c.Lk)("img",{src:e.logo},null,8,w),(0,c.Lk)("div",_,[(0,c.Lk)("div",O,(0,o.v_)(e.pluginName),1),(0,c.Lk)("div",L,(0,o.v_)(e.description),1)])],10,h))),128))]),(0,c.Lk)("div",C,[(0,c.Lk)("div",P,[(0,c.Lk)("div",j,[(0,c.Lk)("div",E,(0,o.v_)(K.value.pluginName),1),(0,c.Lk)("div",F,[((0,c.uX)(),(0,c.CE)(c.FK,null,(0,c.pI)(["author","version"],t=>(0,c.Lk)("span",{key:t,class:(0,o.C4)(t)},[(0,c.Lk)("span",null,(0,o.v_)(e.$t(`feature.installed.${t}`)),1),(0,c.Lk)("span",null,(0,o.v_)(K.value[t]||e.$t("feature.installed.unknown")),1)],2)),64))]),(0,c.Lk)("div",x,(0,o.v_)(K.value.description),1)]),(0,c.Lk)("div",N,[(0,c.bF)(i,{type:"primary",size:"small",shape:"round",loading:K.value.isloading,onClick:t[0]||(t[0]=e=>U(K.value))},{default:(0,c.k6)(()=>[(0,c.eW)((0,o.v_)(e.$t("feature.installed.remove")),1)]),_:1},8,["loading"])])]),(0,c.Lk)("div",X,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(K.value.features,(e,a)=>((0,c.uX)(),(0,c.CE)(c.FK,null,[e.cmds.filter(e=>!e.label).length>0?((0,c.uX)(),(0,c.CE)("div",{key:a,class:"desc-item"},[(0,c.Lk)("div",null,(0,o.v_)(e.explain),1),((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(e.cmds,a=>((0,c.uX)(),(0,c.CE)(c.FK,null,[a.label?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.Wv)(S,{key:a,class:(0,o.C4)({executable:!a.label})},{overlay:(0,c.k6)(()=>[(0,c.bF)(A,{onClick:({key:t})=>$(t,e,a)},{default:(0,c.k6)(()=>[(0,c.bF)(v,{key:"open"},{default:(0,c.k6)(()=>[(0,c.bF)((0,s.R1)(u.A)),t[2]||(t[2]=(0,c.eW)(" 运行 ",-1))]),_:1}),B(a)?((0,c.uX)(),(0,c.Wv)(v,{key:"remove"},{default:(0,c.k6)(()=>[(0,c.bF)((0,s.R1)(l.A)),t[4]||(t[4]=(0,c.eW)(" 从超级面板中取消固定 ",-1))]),_:1})):((0,c.uX)(),(0,c.Wv)(v,{key:"add"},{default:(0,c.k6)(()=>[(0,c.bF)((0,s.R1)(r.A)),t[3]||(t[3]=(0,c.eW)(" 固定到超级面板 ",-1))]),_:1}))]),_:2},1032,["onClick"])]),default:(0,c.k6)(()=>[(0,c.bF)(i,{size:"small",class:"keyword-tag"},{default:(0,c.k6)(()=>[(0,c.eW)((0,o.v_)(a.label||a)+" ",1),(0,c.bF)((0,s.R1)(n["default"]))]),_:2},1024)]),_:2},1032,["class"]))],64))),256))])):(0,c.Q3)("",!0)],64))),256))])])])):((0,c.uX)(),(0,c.CE)("div",k,[(0,c.bF)(d,{class:"error-content","sub-title":"哎呀，暂时还没有安装任何插件！"},{icon:(0,c.k6)(()=>[(0,c.bF)(a,{"animation-data":(0,s.R1)(f),height:240,width:240},null,8,["animation-data"])]),extra:(0,c.k6)(()=>[(0,c.bF)(i,{key:"console",type:"primary",onClick:V},{default:(0,c.k6)(()=>[...t[1]||(t[1]=[(0,c.eW)("去插件市场看看吧",-1)])]),_:1})]),_:1})]))])])}}},R=a(30188);const S=(0,R.A)(A,[["__scopeId","data-v-0c9249fa"]]);var W=S},38345:function(e,t,a){t.A=void 0;var n=a(4126),l=u(a(70583)),r=u(a(85656));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(e,t){var a=i({},e,t.attrs);return(0,n.createVNode)(r["default"],i({},a,{icon:l["default"]}),null)};o.displayName="PushpinOutlined",o.inheritAttrs=!1;var s=o;t.A=s},55634:function(e,t,a){var n=a(81832),l=a(4507),r=a(15302),u=a(20844),i=a(17057),c=a(33565),o=a(87597),s=a(98815),d=s("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{find:function(e){i(this);try{u(e)}catch(n){o(this,"throw",n)}if(d)return l(d,this,e);var t=c(this),a=0;return r(t,function(t,n){if(e(t,a++))return n(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},70583:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"};t["default"]=a},80373:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};t["default"]=a},85307:function(e,t,a){t.A=void 0;var n=a(4126),l=u(a(80373)),r=u(a(85656));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(e,t){var a=i({},e,t.attrs);return(0,n.createVNode)(r["default"],i({},a,{icon:l["default"]}),null)};o.displayName="CaretRightOutlined",o.inheritAttrs=!1;var s=o;t.A=s}}]);